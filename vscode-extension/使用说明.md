# YC-PCA 扩展使用说明

## 🚀 快速测试步骤

### 1. 打开测试文件
```bash
# 在VSCode中打开项目文件夹
code /Users/yichao/web/PCA/vscode-extension/

# 打开提供的测试文件
test.php
```

### 2. 测试扩展功能

#### ✅ 自动检测（打开PHP文件时）
- 扩展会自动激活并分析当前PHP文件
- 安全问题会用红色高亮显示
- 状态栏会显示"YC-PCA"图标

#### 📋 手动分析命令
1. **按 Ctrl+Shift+P** 打开命令面板
2. 输入 "YC-PCA" 查看可用命令：
   - `YC-PCA: 分析当前文件`
   - `YC-PCA: 刷新安全分析`
   - `YC-PCA: 生成分析报告`

#### 🔍 预期检测结果
test.php 文件应该检测到以下安全问题：

```
✅ 应该检测到的问题：
1. 未过滤的用户输入 ($_GET, $_POST, $_REQUEST)
2. 代码/命令执行函数 (eval, system, exec)
3. 已弃用的MySQL函数 (mysql_query)
4. 文件包含漏洞 (include $_GET)
5. 文件操作风险 (file_get_contents $_POST)
```

### 3. 验证功能是否正常

#### 🎯 成功指标：
- [ ] 扩展成功激活（显示激活消息）
- [ ] 安全问题被红色高亮标记
- [ ] 命令面板显示中文命令
- [ ] 分析结果显示具体问题数量
- [ ] 生成的报告包含详细信息

#### ❌ 如果仍显示"没有匹配的结果"：
1. 确认当前文件是 `.php` 文件
2. 确认文件包含PHP代码（以 `<?php` 开头）
3. 重新启动VSCode
4. 手动执行刷新命令

## 🔧 故障排除

### 问题1: 扩展未激活
**解决方案**:
```bash
# 检查扩展是否安装
code --list-extensions | grep yc-php

# 重新安装
code --install-extension yc-php-code-analysis-1.0.3.vsix
```

### 问题2: 无法检测PHP文件
**解决方案**:
1. 确认文件扩展名为 `.php`
2. 确认文件内容包含 `<?php` 标签
3. 在VSCode右下角检查语言模式是否为"PHP"

### 问题3: 命令无法执行
**解决方案**:
1. 重新启动VSCode
2. 检查开发者控制台是否有错误信息
3. 手动刷新扩展

## 📊 功能验证清单

```
扩展状态检查：
□ 扩展已安装并激活
□ 状态栏显示YC-PCA图标
□ 控制台输出激活消息

功能测试：
□ 打开test.php文件自动分析
□ 安全问题正确高亮显示
□ 手动分析命令正常工作
□ 报告生成功能正常
□ 中文界面显示正确

预期结果：
□ 检测到8+个安全问题
□ 分析报告包含详细说明
□ 用户界面响应快速
□ 错误处理机制正常
```

## 📞 技术支持

如果遇到问题，请提供以下信息：
1. VSCode版本
2. 扩展版本 (1.0.3)
3. 操作系统
4. 错误截图或日志信息

---

**版本**: 1.0.3  
**更新时间**: 2025-01-15  
**技术支持**: YC-PCA Development Team